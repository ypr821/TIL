# 자바 프로그램 실행 과정

<br>

작성일자 : 2021-11-08 

내용 : '자바의신.2' 서적 공부, 자바프로그램 실행 과정 서칭

<br><br>

## **컴퓨터에서 프로그램을 실행하는 방법은 인터프리트 방식과 정적 컴파일 방식 두가지다.**

**인터프리트 방식**은 프로그램을 실행할때마다 컴퓨터가 알아들을 수 있는 언어로 변환하는 작업을 수행한다.

**정적 컴파일 방식**은 실행하기 전에 컴퓨터가 알아 들을 수 있는 언어로 변환하는 작업을 미리 실행한다. 즉, 변환 작업을 딱 한번 수행한다.

<br><br>

##  인터프리터언어 vs 컴파일언어 

**인터프리터언어**

- 인터프리터 언어는 원시코드(프로그래머가 작성한 소스코드)를 기계어로 변환하는 과정없이 한줄 한줄 해석하여 바로 명령어를 실행하는 언어를 말합니다. R, Python, Ruby와 같은 언어들이 대표적인 인터프리터 언어이다. 
- 인터프리터가 직접 한 줄씩 읽고 따로 기계어로 변환하지 않기 때문에 빌드 시간이 없다. Runtime 상황에서는 한 줄씩 실시간으로 읽어서 실행하기 때문에 컴파일 언어에 비해 속도가 느리다.

- 실행속도는 느리지만 코드 변경시 빌드 과정없이 바로 실행이 가능하다는 장점이 있다. 

<br>

**컴파일 언어**

- 컴파일 언어는 프로그래머가 작성한 소스코드를 모두 기계어로 변환한 후에 기계(JVM 같은 가상 머신)에 넣고 기계어 코드를 실행한다. 
- 소스코드를 기계어로 번역하는 빌드 과정에서는 인터프리터 언어에 비해 시간이 소요된다. 
- 하지만 런타임 상황에서는 이미 기계어로 모든 소스코드가 변환되어 있기 때문에 빠르게 실행할 수 있습니다. 대표적인 언어로 C, C++이 있습니다.



<br><br>

## **자바에서 프로그램을 실행하는 과정**을 살펴보자.

1. 자바로 소스코드를 작성하면 java 파일이 생성된다. 
2. 자바 컴파일러로 class 파일로 변환한다. 이때 class 파일은 Bytecode이다.
3. Bytecode를  JVM에서 JIT로 기계코드로 변환한다.

<img width="1149" alt="20211108_031454" src="https://user-images.githubusercontent.com/56250078/140707187-9f56e962-ceab-4dcc-b9e8-762741101eeb.png">

javac 라는 명령어를 사용하여 컴파일하는 단계에서 만들어진 class라는 파일은 바이트 코드(bytecode)일 뿐이다. 

자바의 모토는 "**Compile once, Run anywhere**"이다. 한번 컴파일한 코드로 리눅스, 맥, 윈도우 등에서 모두 사용할 수 있다. 

javac라는 명령어를 수행한다는건 우리가 작성한 java파일을 어떤 OS에서도 수행될 수 있도록 바이트코드로 만든 것이다.

컴퓨터가 알아들을 수 있도록 기계코드로 다시 변환 작업이 필요하다. 이 변환 작업을 **JIT 컴파일러**에서 한다.

<br><br>

## **JIT 컴파일러**란? 



- Java뿐만 아니라 C# 등에서도 제공하는 실시간 컴파일 방식이다.

- 'Just-In-Time'의 약자이다.

- 동적변환 (dynamic translation) 방식이다. 명칭은 컴파일러지만 실행시 적용되는 기술이다.

<br><br>

### JIT 는  인터프리트 방식과 정적 컴파일 방식을 혼합하여 사용한다.

변환 작업은 인터프리터에 의해서 지속적으로 수행되지만, 필요한 코드의 정보는 캐시에 담아 두었다가 (메모리에 올려두었다가) 재사용 한다.

<br>

동작방식 <br>
a. 실행할 때 컴파일을 하면서 해당 코드를 캐싱한다. (코드 캐쉬) <br>
b. 그 이후에는 바뀐 부분만 컴파일 하고 나머지는 캐싱된 코드를 사용한다. <br>
c. JVM은 코드를 바로 (바이너리 코드) 컴파일 하지 않는다. <br><br>

https://nopainnocode.tistory.com/15
